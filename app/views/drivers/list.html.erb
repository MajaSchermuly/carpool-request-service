<h1 class="title">Drivers on <%= @ndr&.start_time&.strftime('%d/%m/%Y') + " - " + @ndr&.end_time&.strftime('%d/%m/%Y') %> </h1>

<p id="notice"><%= notice %></p>

<div class="horiz-container hide-on-mobile-only">
  <%= link_to "Cars", cars_list_path(:ndr_id => @ndr.ndr_id), :class => "grey button small-margins" %>
  <%= link_to "Drivers", drivers_list_path(:ndr_id => @ndr.ndr_id), :class => "green button small-margins" %>
  <%= link_to "Requests", requests_list_path(:ndr_id => @ndr.ndr_id), :class => "grey button small-margins" %>
</div>

<div class="view-table hide-on-mobile-only">
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Number</th>
        <th>Assigned Car</th>
        <th>Check-in Status</th>
        <th>Duration Since</th>
        <% if !current_member.is_supervisor%>
          <th colspan="2">Actions</th>
        <% end %>
      </tr>
    </thead>

    <tbody>
      <% @drivers&.each do |driver| %>
        <% member = Driver.find_by(member_id: driver.member_id) %>
        <% car = Car.find_by(driver_id: driver.driver_id, ndr_id: @ndr.ndr_id) %>
        <td><%= member.first_name + " " + member.last_name%></td>
        <td><%= member.phone %></td>
        <td><% "#" + car.car_id + " " + car.color + " " + car.make + " " + car.model%></td>
        <td><%= driver.driver_status %></td>
        <td><%= (DateTime.now.time - driver.check_in_time.time).strftime("m") %></td>
        <% if !current_member.is_supervisor %>
          <td class="b-cell"><%= link_to 'Edit', edit_driver_path(driver), :class => "dark-grey table button" %>
          <td class="b-cell"><%= link_to 'Assign', assign_driver_path(driver), :class => "dark-grey table button" %>
        <% end %>
      <% end %>
    </tbody>
  </table>
</div>

<div class="show-on-mobile-only">
  <div class="horiz card">
    <p>
      This page is designed to work on desktop devices only. <br>
      Please try again on a non-mobile device.
    </p>
  </div>
</div>